@{
    Layout = null;
    ViewData["Title"] = "Login Page";
}

<script src="~/lib/jquery/dist/jquery.min.js"></script>
<script src="~/lib/cookie/jquery.cookie.min.js"></script>
<script src="~/lib/layer/layer.min.js"></script>
<link href="https://cdn.bootcdn.net/ajax/libs/layer/3.5.1/theme/default/layer.min.css" rel="stylesheet">
<link rel="stylesheet" href="~/css/login.css" />
<body style="margin:0px !important">
    <div class="login">

        <div class="login_m">
            <div class="login_boder">
                <div class="login_padding">
                    <h2>用户名</h2>
                    <label>
                        <input type="text" id="username" autocomplete="off" class="txt_input txt_input2"
                               placeholder="请输入用户名/工号">
                    </label>
                    <h2>密码</h2>
                    <label>
                        <input type="password" name="textfield2" id="userpwd" class="txt_input" placeholder="请输入密码">
                    </label>
                    <p class="forgot"><a href="javascript:void(0);">忘记密码?</a></p>
                    <div class="rem_sub">
                        <div class="rem_sub_l">
                            <input type="checkbox" name="checkbox" id="save_me">
                            <label for="checkbox">记住</label>
                        </div>
                        <label>
                            <input type="button" class="sub_button" name="button" id="btnLogin" value="登录" style="opacity: 0.7;">
                        </label>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
        $("#btnLogin").on('click', function () {
            $('#username').val('admin');
            $('#userpwd').val('admin');
            var username = $('#username').val();
            var userpwd = $('#userpwd').val();
            var t = $('.login_m')[0].offsetTop + 70;
            var l = $('.login_m')[0].offsetLeft + 70;

            if (isEmpty(username) || isEmpty(userpwd)) {

                layer.msg('请输入用户名\密码进行登录!', { icon: 2, offset: [t + 'px', l + 'px'] });
            } else {
                var loading = layer.msg('加载中', { icon: 16, shade: 0.01, offset: [t + 'px', l + 'px'] });
                $.ajax({
                    type: "Get",
                    url: "auth?userName=" + username + "&pwd=" + userpwd,
                    success: function (result) {
                        if (result.state == "success") {
                            $.cookie('token', result.data, { expires: 1 });
                            window.location.href = "/"
                        } else {
                            layer.msg('查询发生错误!', { icon: 2 });
                        }
                        layer.close(loading);
                    },
                    error: function (data) {
                        layer.close(loading);
                        if (data.status == 401) {
                            data.statusText = "您尚未登录或授权丢失,请重新登录!";
                        }
                        layer.alert("操作发生错误!\r\n原因：" + data.statusText, { icon: 2 });
                    }
                });
            }

        });

        var isEmpty = function (val) {
            return val == "" || val.length == 0 || val == null || val == void 0 || val == "null" || val == "undefined"
        }
    </script>
</body>